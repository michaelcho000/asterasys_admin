# 마케팅 인사이트 — 시술 예약 전환 퍼널 시각화 기획 (Duralux 템플릿 준수)

- 작성일: 2025-09-30
- 근거 문서: `docs/전환퍼널분석.md`
- 목적: 기존 카드의 오류 가능성을 줄이고, 검색 → 시술 결정 퍼널을 간략·직관적으로 재시각화. Duralux 컴포넌트와 CSS를 재사용하여 구현 복잡도를 낮춤.

---

## 핵심 원칙
- 본 카드는 제품 구매 퍼널이 아님. “검색 → 시술 결정” 퍼널에만 집중.
- 새로운 UI 패턴을 도입하지 않음. Duralux의 카드, 탭, 진행률(progress), 배지(badge), 표(table) 컴포넌트를 재사용.
- 단계 수를 4단계로 단순화하여 해석 부담 최소화.
  - 1) 검색/노출 → 2) 방문 → 3) 문의(리드) → 4) 시술 결정
- 수치는 `docs/전환퍼널분석.md`의 벤치마크 범위를 기반으로 “중간값 중심” 예측을 우선 제공. 실제 데이터 연결 시 자동 대체.

---

## 데이터 정의(간략)
- 입력 지표
  - searches: 검색/노출 수(예: 트래픽 또는 검색량 추정)
  - ctr: 검색→방문 전환율(기준 범위 2~5%, 중간값 3.5%)
  - siteToInquiry: 방문→문의 전환율(1~4%, 중간값 2.5%)
  - inquiryToBooking: 문의→예약 전환율(30~60%, 중간값 45%)
  - bookingToProcedure: 예약→시술 결정 전환율(40~70%, 중간값 55%)
- 산출 지표
  - visits = searches × ctr
  - inquiries = visits × siteToInquiry
  - bookings = inquiries × inquiryToBooking
  - procedures = bookings × bookingToProcedure
  - finalConversion = procedures / searches

참고: 모든 수치는 소수점 반올림 및 표기 단위를 통일(%, K, M)하여 표시.

---

## 화면 구성 요약(단일 카드, 3~4 탭)
- 컨테이너: `.card`(Duralux)
- 헤더: 카드 제목 + 기간/제품/채널 필터(드롭다운) + 툴팁
- 본문: 탭(nav-tabs)
  - 탭1: 시장 평균 예측(중간값)
  - 탭2: 경쟁사 평균 예측(덴서티·세르프·올리지오·볼뉴머·텐써마 평균)
  - 탭3: 우리 제품 예측(내부 데이터 연결 시 자동 반영)
  - 탭4: 비교(3개 시나리오를 한 화면에서 비교) — 필요 시 활성화

각 탭 공통 레이아웃(좌/우 2열)
- 좌측(col-lg-5): 최종 전환 요약
  - 원형/수평 진행률 중 택1
    - 옵션A: `CircularProgressbar`로 finalConversion(검색→시술 결정) 강조
    - 옵션B: `HorizontalProgress`로 finalConversion 강조(심플 추천)
  - 핵심 수치
    - 최종 전환율(%)
    - 예상 시술 결정 수(절대값)
    - 검색 대비 이탈율(%)
- 우측(col-lg-7): 4단계 축약 퍼널 바
  - 각 단계별 수평 progress bar(`.progress .progress-bar`)
  - 막대 길이: 기준 대비 상대 비율(직전 단계 100% 기준)
  - 라벨: 단계명, 절대값, 단계 전환율(%) 함께 표시

하단(공통)
- 보조 정보 바: 정의/범위, 데이터 출처, 경고(예: 표본 적음)

---

## 컴포넌트 재사용 설계(Duralux)
- 레이아웃: `.card`, `.card-header`, `.card-body`, `.row`, `.col-*`
- 탭: `.nav .nav-tabs` + `.tab-content`
- 진행률: `.progress` + `.progress-bar` 또는 `src/components/shared/HorizontalProgress.jsx`
- 원형 게이지(선택): `react-circular-progressbar` + `src/components/shared/CircleProgress.jsx`
- 배지: `.badge bg-*`(단계 라벨/상태 표기)
- 표(비교 탭): `.table`, `.table-sm`, `.table-borderless`
- 색상: 테마 변수 사용(primary, success, warning, danger) — 새 색상 추가 금지

---

## 시나리오별 예측 규칙
- 시장 평균 예측(탭1)
  - 전환율: `docs/전환퍼널분석.md`의 범위 중간값 적용
  - 가정 예: searches=10,000일 때
    - visits=350(3.5%) → inquiries=8.8(2.5%) → bookings=4.0(45%) → procedures=2.2(55%)
    - finalConversion≈0.022%
- 경쟁사 평균 예측(탭2)
  - 경쟁사: 덴서티, 세르프, 올리지오, 볼뉴머, 텐써마
  - 적용: 시장 평균 중간값 ± 미세 가중(카테고리/채널 믹스 반영 시) — 초기 버전은 시장 평균 중간값과 동일로 시작, 추후 실데이터 반영 시 보정
- 우리 제품 예측(탭3)
  - 초기 로딩: 시장 평균 중간값 사용
  - 데이터 연결 시: 내부 관측치가 있으면 해당 단계별 전환율로 대체

주의: 모든 수치는 예시이며 실제 적용 시 데이터셋 기반으로 업데이트.

---

## 비교 탭(옵션)
- 목표: 3개 시나리오(시장 평균/경쟁사 평균/우리 제품)를 한 화면에서 직관 비교
- 구성
  - 상단: 스위치(절대값/비율 보기), 기간 선택
  - 본문: 4단계 수평 스택(3색 막대 또는 3행 x 4단계 매트릭스)
  - 하단: 요약 표(최종 전환율, 최대 병목 단계, 단계별 격차)
- 컴포넌트: `.table` + `.progress` 조합(새 차트 라이브러리 불필요)

---

## 경쟁력 체크(덴서티·세르프·올리지오·볼뉴머·텐써마)
- 목적: “검색 → 시술 결정” 퍼널 기준으로 우리 제품의 상대 경쟁력을 정량 체크
- 경쟁사 평균 정의: 위 5개 제품의 퍼널 단계별 전환율 평균(초기값은 문서 중간값으로 시작 → 데이터 연동 시 브랜드별 보정)
- 핵심 지표
  - RCI(Relative Conversion Index) = our.finalConversion ÷ competitorAvg.finalConversion
  - SAI(Stage Advantage Index, 단계별) = our.stepRate ÷ competitorAvg.stepRate
  - Bottleneck = SAI가 최소인 단계(개선 1순위)
  - Sensitivity = 각 단계 전환율 +1%p 변화 시 최종 전환율 변화량(우선순위 산정)
- 표현(새 UI 금지, Duralux 재사용)
  - 좌측: 최종 전환 RCI 수평 바(`.progress`) + 값 배지(`.badge bg-primary`)
  - 우측: 단계별 SAI 미니 바 4개(visit/inquiry/booking/procedure)와 최소 단계 하이라이트(`.text-danger`)
  - 하단 표: our vs competitorAvg 단계별 수치/비율 비교(`.table.table-sm.table-borderless`)
- 예시 수치(가정, searches=10,000, 중간값 기준)
  - competitorAvg.finalConversion ≈ 0.022%
  - our.finalConversion: 초기엔 동일(0.022%), 데이터 연동 시 실제 관측치로 자동 갱신
  - 초기 RCI=1.00 → 실데이터 반영 후 RCI 재계산으로 경쟁력 판단

데이터 연결 시 보정 규칙(가이드)
- 채널 믹스(카페/블로그/영상) 강점이 확인되면 siteToInquiry에 가중(+)
- 상담 운영 속도/품질 개선이 확인되면 inquiryToBooking에 가중(+)
- 의료진 신뢰/후기 강화가 확인되면 bookingToProcedure에 가중(+)
- 모든 보정은 출처와 근거 로그를 남기고, 카드 하단에 “가정/출처” 영역 표기

---

## 경쟁사 시장 평균 가정(초안)
- 벤치마크 범위(문서 근거):
  - CTR 2~5%, 방문→문의 1~4%, 문의→예약 30~60%, 예약→시술 40~70%
- 초기 평균값(중간값)으로 경쟁사 평균을 시작하고, 채널 믹스/카테고리 차이에 따른 보정은 추후 단계에서 적용
- 경쟁사 목록: 덴서티, 세르프, 올리지오, 볼뉴머, 텐써마

표기 예(10,000 검색 가정)
- 시장 평균: 최종 전환율 ≈ 0.022%
- 경쟁사 평균(초기값): 시장 평균과 동일로 시작 → 추후 보정
- 우리 제품: 데이터 연동 전에는 시장 평균과 동일, 연동 후 실측 반영

---

## 상태/오류 처리
- Loading: 스켈레톤 바 4개(단계 수만큼)
- Empty/No data: “데이터가 없습니다” 메시지 + 가이드 텍스트
- N/A 단계: 해당 progress bar 흐림 처리 + `N/A` 라벨
- 반올림 규칙 및 합계 검증: 각 단계 수치와 비율의 일관성 검사

---

## 데이터 스키마(제안)
```ts
// 입력
interface FunnelInput {
  searches: number
  ctr?: number // 0~1, 미지정 시 0.035
  siteToInquiry?: number // 0~1, 미지정 시 0.025
  inquiryToBooking?: number // 0~1, 미지정 시 0.45
  bookingToProcedure?: number // 0~1, 미지정 시 0.55
  range?: { start: string; end: string }
}

// 출력
interface FunnelOutput {
  visits: number
  inquiries: number
  bookings: number
  procedures: number
  finalConversion: number // 0~1
  steps: Array<{
    key: 'search' | 'visit' | 'inquiry' | 'procedure'
    absolute: number
    stepRate: number // 직전 단계 대비
  }>
}

// 경쟁사 평균(초안)
interface CompetitorAvg {
  brand: '덴서티' | '세르프' | '올리지오' | '볼뉴머' | '텐써마'
  ctr?: number
  siteToInquiry?: number
  inquiryToBooking?: number
  bookingToProcedure?: number
}
```

---

## 구현 가이드(요약)
- 라우트: 기존 마케팅 인사이트 페이지 내 카드 교체(컴포넌트 재사용)
- 추천 구조
  - Container: `Card`
  - Header: 제목 + 기간/제품/채널 필터
  - Body: `Tabs`(시장 평균/경쟁사 평균/우리 제품/비교)
  - Step Bars: `HorizontalProgress` 또는 `.progress`
  - Final KPI: `HorizontalProgress`(간결) 또는 `CircleProgress`(선택)
  - 비교 표: `.table.table-sm`
- 스타일: `src/assets/scss/themes/components/_card.scss`, `_navs-tabs.scss`, `_table.scss` 범위 내에서만 조정. 새 전역 변수 추가 금지.

---

## QA 체크리스트
- 퍼널 단계가 “검색 → 방문 → 문의 → 시술 결정”으로 일관되는가
- 최종 전환율 계산이 절대 수치와 일치하는가(절대/비율 간 반올림 차이 확인)
- 탭별 수치/라벨/단위가 일관되는가(%, K, M)
- 빈 데이터/로딩 상태에서 UI 깨짐이 없는가(Duralux 클래스 유지)
- 비교 탭에서 3개 시나리오가 동일 축 기준으로 표현되는가

---

## 작업 항목(TODO)
- 데이터 매핑
  - 전환 퍼널 입력/출력 타입 정리 및 기본값(중간값) 적용
  - 내부 관측치 연결 시 단계별 전환율 대체 로직 추가
- UI 구성
  - 카드 골격 + 탭 + 필터 바인딩(드롭다운)
  - 단계 진행 바 4개 + 최종 KPI 진행 바
  - 비교 탭 표 및 막대 구성(진행률 재사용)
- 검증
  - 샘플 searches=10,000 케이스로 단위/반올림/합계 검증
  - 빈/로딩/N/A 상태 테스트
- 문서화
  - 데이터 출처/가정 표시 및 업데이트 절차 명시

---

## 비고
- 향후 실데이터 연동 시, 경쟁사 평균은 카테고리·채널 믹스(카페/블로그/영상) 가중치를 반영하여 시장 평균 대비 상향/하향 보정 예정.
- 본 기획은 Duralux 템플릿의 범위 내에서만 스타일을 조정하며, 새로운 UI 패턴 도입 없이 컴포넌트 재활용을 원칙으로 함.

---

## 최종 카드 디자인 사양(Production)
- 범위: “검색/노출 → 방문 → 문의(리드) → 시술 결정” 퍼널만 다룸(제품 구매 퍼널 아님)
- 대상:
  - 경쟁사 5종: 덴서티 · 세르프 · 올리지오 · 볼뉴머 · 텐써마
  - 자사 3종: 리프테라(HIFU) · 쿨소닉(HIFU) · 쿨페이즈(RF)
- 레이아웃(Duralux 재사용)
  - Wrapper: `.card.h-100`
  - Header: 제목, 기간/제품/채널 드롭다운, 도움말 툴팁
  - Body: `.nav.nav-tabs` + `.tab-content`
    - 탭1: 시장 평균(중간값) 전환 퍼널
    - 탭2: 경쟁사 평균(5종) 전환 퍼널
    - 탭3: 우리 제품(3종) RCI/SAI 분석
    - 탭4: 비교(시장 평균 vs 경쟁사 평균 vs 우리 제품)
- 시각화 구성
  - 좌측: 최종 전환 요약(수평 진행률 또는 원형 게이지)
  - 우측: 단계별 수평 진행바 4개 + 라벨(단계명/전환율)
  - 하단: `.table.table-sm.table-borderless`로 보조 지표와 출처 표기
- 색상/스타일: Duralux 테마 변수(primary/success/warning/danger)만 사용, 새 전역 색상 금지, 이모지 금지

## 데이터 반영 규칙(요약)
- 정규화 수치 노출 금지
  - 10,000 검색 정규화는 내부 QA/검증용이며 UI에 표시하지 않음
  - 기본 표시는 전환율(%)과 지수(RCI/SAI). 절대값은 “실제 입력 데이터(searches 등)가 있을 때만” 병기
- 입력 소스(8월)
  - searches: `data/raw/2025-08/asterasys_total_data - traffic.csv` 제품 단위 집계
  - 참여/조회(보정 근거): `cafe_post.csv`/`cafe_comments.csv` 또는 `data/processed/2025-08/dashboard.json`
  - 참고(채택): `sale.csv`는 병원 채택 벤치마크로만 참고, 퍼널 계산에는 미사용
- 기본 전환율(중간값)
  - CTR 3.5%, 방문→문의 2.5%, 문의→예약 45%, 예약→시술 55%
- 제품별 미세 보정(예)
  - 리프테라: 조회/포스트↑ → 예약→시술 +2%p 제안
  - 쿨소닉: 참여/포스트↑ → 방문→문의 +0.5%p 제안
  - 쿨페이즈: 기본 유지(필요 시 채널 믹스 반영)
- 경쟁사 평균(5종)
  - 초기: 시장 평균(중간값)
  - 데이터 연동 시: 채널 믹스/상담 속도/후기 신뢰에 따라 단계별 ±보정(사전 캡 적용)

## 표시 정책
- 기본: 전환율(%)과 지수(RCI, SAI)만 표시
- 절대값: 실데이터(searches 등) 존재 시에만 표시. 정규화 절대값(10,000 가정)은 금지
- 반올림: 전환율 소수 1자리, 지수 2자리, 절대값 천단위 구분
- 도움말: 카드 하단에 “판매는 채택 벤치마크, 최종 단계는 시술 결정” 고지

## 상태/오류 처리 · 접근성
- 로딩: 스켈레톤 바 4개(퍼널 단계 수)
- Empty: “데이터가 없습니다” + 가이드 텍스트
- N/A 단계: 흐림 처리 + `N/A` 라벨
- 접근성: 각 진행바에 `aria-valuenow/min/max`, 라벨 텍스트 제공

## QA 체크리스트(최종)
- 정규화 수치가 노출되지 않는가(전 구역)
- 단계/탭 간 라벨·색상·단위 일관성 유지되는가
- 전환율 합과 절대값 계산(있을 때) 일관성이 있는가(반올림 허용 범위)
- RCI/SAI 계산이 경쟁사 평균 대비 정확한가
- 출처/가정/보정 근거가 카드 하단에 표기되는가

## 2025-08 인사이트 요약(콘텐츠 카피 가이드)
- 공통 병목: 방문→문의(2.5% 중간값). CTA/문의 폼 최적화와 응답 SLA 개선 권장
- 리프테라: 조회/포스트↑ → 예약→시술 단계 강화 시 최종 전환 개선 기대
- 쿨소닉: 참여/포스트↑ → 방문→문의 전환 미세 상향 여지
- 쿨페이즈: 블로그 볼륨/FAQ 보강으로 CTR·문의 전환 동시 개선 필요
- 경쟁사 평균(5종): 초기 시장 평균과 동일, 데이터 연동 후 브랜드별 보정 필요(커뮤니티/상담/후기 기반)
